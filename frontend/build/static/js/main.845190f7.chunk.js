(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{224:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);a(84),a(85),a(88),a(89);var n=a(1),c=a.n(n),s=a(45),r=a.n(s),i=(a(94),a(7)),o=a(3),u=a(2),l=a(6),d=a(0),j=c.a.createContext(),b=function(e){var t=e.initialState,a=e.reducer,n=e.children,s=c.a.useReducer(a,t),r=Object(l.a)(s,2),i=r[0],o=r[1];return Object(d.jsx)(j.Provider,{value:{state:i,dispatch:o},children:n})},m=function(e,t){return function(a){return function(n){return Object(d.jsx)(j.Consumer,{children:function(c){var s=c.state,r=c.dispatch;return Object(d.jsx)(a,Object(u.a)(Object(u.a)(Object(u.a)({},n),e(s)),function(e,t){var a={},n=function(n){a[n]=function(){return e[n].apply(e,arguments)(t)}};for(var c in e)n(c);return a}(t,r)))}})}}},p="SET_CURRENT_USER",h="POST_LOADING",O="ADD_POST",f="UPDATE_POST",x="UPDATE_POSTS",v="GET_POSTS",g="GET_POST",N="DELETE_POST",y="CLEAR_POSTS",w="SUBSCRIPTION_LOADING",k="ADD_SUBSCRIPTION",S="GET_SUBSCRIPTIONS",_="DELETE_SUBSCRIPTION",C="USER_LOADING",E="GET_USER",P=a(35),A=function(e){return function(t,a){var n={};for(var c in e){var s=t[c],r=e[c](s,a);n[c]=r}return n}}({auth:function(e,t){switch(t.type){case p:return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:0!==Object.keys(t.payload).length,user:t.payload});default:return e}},post:function(e,t){switch(t.type){case h:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload});case y:return Object(u.a)(Object(u.a)({},e),{},{posts:[],totalCount:0});case v:return Object(u.a)(Object(u.a)({},e),{},{posts:t.payload.posts,totalCount:t.payload.totalCount,isLoading:!1});case g:return Object(u.a)(Object(u.a)({},e),{},{post:t.payload,isLoading:!1});case O:return Object(u.a)(Object(u.a)({},e),{},{posts:[t.payload].concat(Object(P.a)(e.posts))});case x:return Object(u.a)(Object(u.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case f:return Object(u.a)(Object(u.a)({},e),{},{post:t.payload});case N:return Object(u.a)(Object(u.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload}))});default:return e}},subscription:function(e,t){switch(t.type){case w:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload});case S:return Object(u.a)(Object(u.a)({},e),{},{subscriptions:t.payload,isLoading:!1});case k:return Object(u.a)(Object(u.a)({},e),{},{subscriptions:[t.payload].concat(Object(P.a)(e.subscriptions))});case _:return Object(u.a)(Object(u.a)({},e),{},{subscriptions:e.subscriptions.filter((function(e){return e._id!==t.payload}))});default:return e}},user:function(e,t){switch(t.type){case C:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload});case E:return Object(u.a)(Object(u.a)({},e),{},{user:t.payload,isLoading:!1});default:return e}}}),I=a(33),L=a(4),T=a.n(L),D=function(e){e?T.a.defaults.headers.common.Authorization=e:delete T.a.defaults.headers.common.Authorization},G={auth:{isAuthenticated:!1,user:{}},post:{posts:[],totalCount:0,post:null,isLoading:!1},subscription:{subscriptions:[],isLoading:!1},user:{user:null,isLoading:!1}};if(localStorage.access_token){var R=localStorage.access_token;D(R);var U=Object(I.a)(R);G.auth.user=U,G.auth.isAuthenticated=!0;var B=Date.now()/1e3;U.exp<B&&(localStorage.removeItem("access_token"),D(!1),G.auth.user={},G.auth.isAuthenticated=!1,window.location.href="/login")}var q=G,F=a(83),Y=m((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(F.a)(e,["component","auth"]);return Object(d.jsx)(o.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return!0===a.isAuthenticated?Object(d.jsx)(t,Object(u.a)({},e)):Object(d.jsx)(o.a,{to:"/login"})}}))})),W=function(e){return{type:p,payload:e}},H=m((function(e){return{auth:e.auth}}),{logout:function(){return function(e){localStorage.removeItem("access_token"),D(!1),e(W({}))}}})((function(e){var t,a=e.logout,s=e.auth,r=s.isAuthenticated,o=s.user,u=Object(n.useState)(!0),j=Object(l.a)(u,2),b=j[0],m=j[1];return t=r?Object(d.jsxs)("li",{className:"nav-item dropdown",children:[Object(d.jsxs)("a",{className:"nav-link",href:"#",role:"button",onClick:function(){return m((function(e){return!e}))},"aria-haspopup":"true","aria-expanded":"false",children:[Object(d.jsx)("i",{className:"fa fa-user"}),"Account"]}),b?Object(d.jsxs)("div",{"aria-labelledby":"navbarDropdown",children:[Object(d.jsx)(i.b,{className:"dropdown-item",to:"/user/"+o.id,children:"My Profile"}),Object(d.jsx)("div",{className:"dropdown-divider"}),Object(d.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(e){e.preventDefault(),a()},children:"Log Out"})]}):null]}):Object(d.jsxs)(c.a.Fragment,{children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(i.b,{className:"nav-link",to:"/login",children:[Object(d.jsxs)("div",{class:"fa-stack",children:[Object(d.jsx)("i",{class:"fa fa-sign-in fa-reverse fa-stack-1x"}),Object(d.jsx)("i",{class:"fa fa-circle-o fa-stack-2x"})]}),"Log In"]})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(i.b,{className:"nav-link",to:"/register",children:[Object(d.jsxs)("div",{class:"fa-stack",children:[Object(d.jsx)("i",{class:"fa fa-user-plus fa-reverse fa-stack-1x"}),Object(d.jsx)("i",{class:"fa fa-circle-o fa-stack-2x"})]}),"Register"]})})]}),Object(d.jsx)("nav",{className:"navbar navbar-icon-top navbar-expand-lg navbar-info bg-dark",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(i.b,{className:"navbar-brand",to:"/",children:"Home"}),Object(d.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})}),Object(d.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(d.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(i.b,{className:"nav-link",to:"/",children:[Object(d.jsxs)("div",{class:"fa-stack",children:[Object(d.jsx)("i",{class:"fa fa-globe fa-reverse fa-stack-1x"}),Object(d.jsx)("i",{class:"fa fa-circle-o fa-stack-2x"})]}),"All Posts"]})}),r&&Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(i.b,{className:"nav-link",to:"/feed",children:[Object(d.jsx)("i",{className:"fa-tag "}),"Feed"]})})]}),Object(d.jsx)("ul",{className:"navbar-nav",children:t})]})]})})})),M=function(){return Object(d.jsxs)("footer",{className:"p-4 text-center",children:["project by Ultima \xa9 ",(new Date).getFullYear()]})},z=m((function(e){return{auth:e.auth}}),{login:function(e){return function(t){T.a.post("/api/auth/login",e).then((function(e){var a=e.data.token;localStorage.setItem("access_token",a),D(a);var n=Object(I.a)(a);t(W(n))}))}}})((function(e){var t=e.history,a=e.auth,c=e.login,s=Object(n.useState)(""),r=Object(l.a)(s,2),i=r[0],o=r[1],u=Object(n.useState)(""),j=Object(l.a)(u,2),b=j[0],m=j[1];Object(n.useEffect)((function(){a.isAuthenticated&&t.push("/")}),[a]);return Object(d.jsx)("div",{className:"row mt-4",children:Object(d.jsx)("div",{className:"col-4 mx-auto",children:Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("article",{className:"card-body",children:[Object(d.jsx)("h4",{className:"card-title text-center mb-4 mt-1",children:"Log In"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c({email:i,password:b})},children:[Object(d.jsx)("div",{className:"form-group",children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("div",{className:"input-group-prepend",children:Object(d.jsx)("span",{className:"input-group-text",children:Object(d.jsx)("i",{className:"fa fa-user"})})}),Object(d.jsx)("input",{className:"form-control",placeholder:"Email",type:"email",name:"email",value:i,onChange:function(e){return o(e.target.value)},pattern:".{5,30}",required:!0})]})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("div",{className:"input-group-prepend",children:Object(d.jsx)("span",{className:"input-group-text",children:Object(d.jsx)("i",{className:"fa fa-lock"})})}),Object(d.jsx)("input",{className:"form-control",placeholder:"Password",type:"password",name:"password",value:b,onChange:function(e){return m(e.target.value)},pattern:".{6,30}",required:!0})]})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("button",{type:"submit",className:"btn btn-dark btn-block",children:"Login"})})]})]})})})})})),J=m((function(e){return{auth:e.auth}}),{register:function(e,t){return function(){T.a.post("/api/auth/register",e).then((function(){return t.push("/login")}))}}})((function(e){var t=e.auth,a=e.history,c=e.register,s=Object(n.useState)(""),r=Object(l.a)(s,2),i=r[0],o=r[1],u=Object(n.useState)(""),j=Object(l.a)(u,2),b=j[0],m=j[1],p=Object(n.useState)(""),h=Object(l.a)(p,2),O=h[0],f=h[1];Object(n.useEffect)((function(){t.isAuthenticated&&a.push("/")}),[]);return Object(d.jsx)("div",{className:"row mt-4",children:Object(d.jsx)("div",{className:"col-4 mx-auto",children:Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("article",{className:"card-body",children:[Object(d.jsx)("h4",{className:"card-title text-center mb-4 mt-1",children:"Registration"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c({name:i,email:b,password:O},a)},children:[Object(d.jsx)("div",{className:"form-group",children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("div",{className:"input-group-prepend",children:Object(d.jsx)("span",{className:"input-group-text",children:Object(d.jsx)("i",{className:"fa fa-user"})})}),Object(d.jsx)("input",{className:"form-control",placeholder:"Name",type:"text",name:"name",value:i,onChange:function(e){return o(e.target.value)},pattern:".{3,20}",required:!0})]})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("div",{className:"input-group-prepend",children:Object(d.jsx)("span",{className:"input-group-text",children:Object(d.jsx)("i",{className:"fa fa-envelope"})})}),Object(d.jsx)("input",{className:"form-control",placeholder:"Email",type:"email",name:"email",value:b,onChange:function(e){return m(e.target.value)},pattern:".{5,30}",required:!0})]})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("div",{className:"input-group-prepend",children:Object(d.jsx)("span",{className:"input-group-text",children:Object(d.jsx)("i",{className:"fa fa-lock"})})}),Object(d.jsx)("input",{className:"form-control",placeholder:"Password",type:"password",name:"password",value:O,onChange:function(e){return f(e.target.value)},pattern:".{6,30}"})]})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("button",{type:"submit",className:"btn btn-dark btn-block",children:"Register"})})]})]})})})})})),$=a(34),K=a.n($),Q=function(){return{type:y}},V=function(e){return{type:h,payload:e}},X=m((function(e){return{auth:e.auth}}),{create:function(e){return function(t){T.a.post("/api/posts",e).then((function(e){return t({type:O,payload:e.data})}))}}})((function(e){var t=e.create,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],r=c[1];return Object(d.jsx)("div",{className:"card mb-4",children:Object(d.jsx)("div",{className:"card-body",children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({body:s}),r("")},children:[Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)(K.a,{placeholder:"What's up?",theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["link","image","video"],["clean"]]},value:s,onChange:function(e){return r(e)}})}),Object(d.jsx)("div",{className:"btn-group float-right",children:Object(d.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Share"})})]})})})})),Z=a(81),ee=a.n(Z),te=m((function(e){return{auth:e.auth}}),{createLike:function(e,t){return function(a){T.a.post("/api/posts/".concat(e,"/likes")).then((function(e){return a({type:t,payload:e.data})}))}},removeLike:function(e,t,a){return function(n){T.a.delete("/api/posts/".concat(e,"/likes/").concat(t)).then((function(e){return n({type:a,payload:e.data})}))}}})((function(e){var t=e.auth,a=e.postId,n=e.likes,c=e.TYPE,s=e.removeLike,r=e.createLike;return Object(d.jsxs)("a",{href:"#",role:"button",className:"card-link",onClick:function(e){if(e.preventDefault(),t.isAuthenticated){var i=n.find((function(e){return e.user===t.user.id}));i?s(a,i._id,c):r(a,c)}},children:[Object(d.jsx)("i",{className:"fa fa-heart"})," ",n.length]})})),ae=a(82),ne=a.n(ae),ce=function(e){var t=e.user,a=e.width,n=void 0===a?"":a;return Object(d.jsx)("img",{src:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y"+ne()(t.email),className:"rounded-circle",alt:t.name,width:n})},se=m((function(e){return{auth:e.auth}}),{remove:function(e){return function(t){T.a.delete("/api/posts/".concat(e)).then((function(){return t({type:N,payload:e})}))}}})((function(e){var t=e.post,a=e.remove,n=e.auth,c=e.TYPE;return Object(d.jsxs)("div",{className:"card mb-4",children:[Object(d.jsx)("div",{className:"card-header",children:Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsx)("div",{className:"mr-2",children:Object(d.jsx)(i.b,{to:"/user/"+t.user._id,children:Object(d.jsx)(ce,{user:t.user,width:"50"})})}),Object(d.jsxs)("div",{className:"ml-2",children:[Object(d.jsx)("div",{className:"h5 m-0",children:t.user.name}),Object(d.jsxs)("div",{className:"h7 text-muted",children:[Object(d.jsx)("i",{className:"fa fa-clock-o"})," ",new Date(t.createdDate).toDateString()]})]})]}),n.isAuthenticated&&n.user.name===t.user.name&&Object(d.jsxs)("div",{className:"dropdown",children:[Object(d.jsx)("button",{className:"btn btn-link dropdown-toggle",type:"button",id:"drop","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),Object(d.jsx)("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"drop",children:Object(d.jsx)("a",{className:"dropdown-item",role:"button",onClick:function(){return a(t._id)},children:"Remove"})})]})]})}),Object(d.jsx)("div",{className:"card-body",dangerouslySetInnerHTML:{__html:t.body}}),Object(d.jsxs)("div",{className:"card-footer",children:[Object(d.jsx)(te,{postId:t._id,likes:t.likes,TYPE:c}),Object(d.jsx)(i.b,{to:"/post/"+t._id,className:"card-link",children:Object(d.jsx)("i",{className:"fa fa-arrow-right"})})]})]})})),re=(a(224),function(){return Object(d.jsxs)("div",{id:"fountainG",className:"mt-4",children:[Object(d.jsx)("div",{id:"fountainG_1",className:"fountainG"}),Object(d.jsx)("div",{id:"fountainG_2",className:"fountainG"}),Object(d.jsx)("div",{id:"fountainG_3",className:"fountainG"}),Object(d.jsx)("div",{id:"fountainG_4",className:"fountainG"}),Object(d.jsx)("div",{id:"fountainG_5",className:"fountainG"}),Object(d.jsx)("div",{id:"fountainG_6",className:"fountainG"}),Object(d.jsx)("div",{id:"fountainG_7",className:"fountainG"}),Object(d.jsx)("div",{id:"fountainG_8",className:"fountainG"})]})}),ie=m((function(e){return{post:e.post,auth:e.auth}}),{getAll:function(e){return function(t){t(V(!0)),T.a.get("/api/posts",{params:e}).then((function(e){return t({type:v,payload:{posts:e.data,totalCount:+e.headers["x-total-count"]}})})).catch((function(){t(V(!1)),t(Q())}))}}})((function(e){var t=e.getAll,a=e.queryParams,s=e.post,r=s.isLoading,i=s.posts,o=s.totalCount,j=Object(n.useState)(1),b=Object(l.a)(j,2),m=b[0],p=b[1];Object(n.useEffect)((function(){return t(h())}),[]),Object(n.useEffect)((function(){return t(h())}),[m]);var h=function(){return Object(u.a)(Object(u.a)({},a),{},{skip:10*(m-1),limit:10})};return Object(d.jsxs)(c.a.Fragment,{children:[r&&Object(d.jsx)(re,{}),!r&&0===o&&Object(d.jsx)("div",{className:"text-center",children:Object(d.jsx)("h2",{children:"There is nothing"})}),i.map((function(e){return Object(d.jsx)(se,{post:e,TYPE:x},e._id)})),!r&&o>i.length&&Object(d.jsx)(ee.a,{activePage:m,itemsCountPerPage:10,totalItemsCount:o,onChange:function(e){return p(e)},itemClass:"page-item",linkClass:"page-link"})]})})),oe=m((function(e){return{auth:e.auth}}))((function(e){var t=e.auth;return Object(d.jsx)("div",{className:"row mt-4",children:Object(d.jsxs)("div",{className:"col-md-6 mx-auto",children:[t.isAuthenticated&&Object(d.jsx)(X,{}),Object(d.jsx)(ie,{queryParams:{}})]})})})),ue=m((function(e){return{auth:e.auth}}),{removeComment:function(e,t){return function(a){T.a.delete("/api/posts/".concat(e,"/comments/").concat(t)).then((function(e){return a({type:f,payload:e.data})}))}}})((function(e){var t=e.comment,a=e.postId,c=e.removeComment,s=e.auth,r=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current.outerHTML="\x3c!-- ".concat(e.text," --\x3e")}),[]),Object(d.jsx)("div",{ref:t})};return Object(d.jsx)("div",{className:"card mb-3",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-md-10",children:Object(d.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsx)("div",{className:"mr-2",children:Object(d.jsx)(ce,{user:t.user,width:"50"})}),Object(d.jsxs)("div",{className:"ml-2",children:[Object(d.jsx)("div",{className:"h5 m-0",children:t.user.name}),Object(d.jsxs)("div",{className:"h7 text-muted",children:[Object(d.jsx)("i",{className:"fa fa-clock-o"})," ",new Date(t.createdDate).toDateString()]})]})]})})}),Object(d.jsx)("div",{className:"col-md-2 text-right",children:s.isAuthenticated&&s.user.name===t.user.name&&Object(d.jsxs)("div",{className:"dropdown",children:[Object(d.jsx)("button",{className:"btn btn-link dropdown-toggle",type:"button",id:"drop","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),Object(d.jsx)("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"drop",children:Object(d.jsx)("a",{className:"dropdown-item",role:"button",onClick:function(){return c(a,t._id)},children:"Remove"})})]})})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)(r,{text:t.body})})]})})})),le=m((function(e){return{auth:e.auth}}),{createComment:function(e,t){return function(a){T.a.post("/api/posts/".concat(e,"/comments"),t).then((function(e){return a({type:f,payload:e.data})}))}}})((function(e){var t=e.postId,a=e.createComment,c=Object(n.useState)(""),s=Object(l.a)(c,2),r=s[0],i=s[1];return Object(d.jsx)("div",{className:"card mb-4",children:Object(d.jsx)("div",{className:"card-body",children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(t,{body:r}),i("")},children:[Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)(K.a,{placeholder:"What do you think?",theme:"snow",modules:{toolbar:!1},value:r,onChange:function(e){return i(e)}})}),Object(d.jsx)("div",{className:"btn-group",children:Object(d.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Comment"})})]})})})})),de=m((function(e){return{post:e.post,auth:e.auth}}),{getPostById:function(e,t){return function(a){a(V(!0)),T.a.get("/api/posts/".concat(e)).then((function(e){return a({type:g,payload:e.data})})).catch((function(){a(V(!1)),t.push("/404")}))}}})((function(e){var t=e.getPostById,a=e.match,c=e.post,s=e.auth,r=e.history;return Object(n.useEffect)((function(){return t(a.params.id,r)}),[]),c.isLoading||null===c.post?Object(d.jsx)(re,{}):Object(d.jsx)("div",{className:"row mt-5",children:Object(d.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(d.jsx)(se,{post:c.post,TYPE:f}),Object(d.jsxs)("div",{className:"col-md-12 mx-auto",children:[s.isAuthenticated&&Object(d.jsx)(le,{postId:c.post._id}),c.post.comments.map((function(e){return Object(d.jsx)(ue,{comment:e,postId:c.post._id},e._id)}))]})]})})})),je=function(e){return{type:C,payload:e}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t(me(!0)),T.a.get("/api/subscriptions",{params:e}).then((function(e){return t({type:S,payload:e.data})})).catch((function(){return t(me(!1))}))}},me=function(e){return{type:w,payload:e}},pe=m((function(e){return{auth:e.auth,subscription:e.subscription}}),{create:function(e){return function(t){T.a.post("/api/subscriptions",e).then((function(e){return t({type:k,payload:e.data})}))}},getAll:be,remove:function(e){return function(t){T.a.delete("/api/subscriptions/".concat(e)).then((function(){return t({type:_,payload:e})}))}}})(Object(o.g)((function(e){var t=e.create,a=e.getAll,c=e.remove,s=e.auth,r=e.subscription,i=r.subscriptions,o=r.isLoading,u=e.history,l=e.userId;Object(n.useEffect)((function(){return a({profile:l})}),[]);return!o&&Object(d.jsxs)("button",{className:"btn btn-dark btn-block subscribe-btn",onClick:function(e){if(e.preventDefault(),s.isAuthenticated){var a=i.find((function(e){return e.subscriber===s.user.id}));a?c(a._id):t({profile:l})}else u.push("/login")},children:["Subscribe | ",Object(d.jsx)("i",{className:"fa fa-users"})," ",i.length]})}))),he=m((function(e){return{user:e.user,auth:e.auth}}),{getUserById:function(e,t){return function(a){a(je(!0)),T.a.get("/api/users/".concat(e)).then((function(e){return a({type:E,payload:e.data})})).catch((function(){a(je(!1)),t.push("/404")}))}}})((function(e){var t=e.getUserById,a=e.match,s=e.history,r=e.user,i=r.user,o=r.isLoading,u=e.auth;return Object(n.useEffect)((function(){return t(a.params.id,s)}),[]),o||null===i?Object(d.jsx)(re,{}):Object(d.jsxs)(c.a.Fragment,{children:[Object(d.jsx)("div",{className:"row mt-5",children:Object(d.jsx)("div",{className:"col-md-6 mx-auto",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-8",children:[Object(d.jsx)("h2",{className:"profile-username",children:i.name}),Object(d.jsxs)("p",{children:[Object(d.jsx)("strong",{children:"Registered: "}),new Date(i.createdDate).toDateString()]})]}),Object(d.jsx)("div",{className:"col-4 text-center",children:Object(d.jsx)(ce,{user:i})})]})})}),!(u.user.id===i._id)&&Object(d.jsx)("div",{className:"row mt-4",children:Object(d.jsx)("div",{className:"col-md-12 text-center",children:Object(d.jsx)("div",{className:"col-4 mx-auto",children:Object(d.jsx)(pe,{userId:i._id})})})}),Object(d.jsx)("div",{className:"row mt-4",children:Object(d.jsxs)("div",{className:"col-md-6 mx-auto",children:[u.user.id===i._id&&Object(d.jsx)(X,{}),Object(d.jsx)(ie,{queryParams:{user:i._id}})]})})]})})),Oe=m((function(e){return{subscription:e.subscription,auth:e.auth}}),{getAllSubscriptions:be})((function(e){var t=e.getAllSubscriptions,a=e.auth,c=e.subscription,s=c.isLoading,r=c.subscriptions;return Object(n.useEffect)((function(){return t({subscriber:a.user.id})}),[]),s?Object(d.jsx)(re,{}):Object(d.jsx)("div",{className:"row mt-4",children:Object(d.jsx)("div",{className:"col-md-6 mx-auto",children:0!==r.length?Object(d.jsx)(ie,{queryParams:{users:r.map((function(e){return e.profile})).join(",")}}):Object(d.jsx)("div",{className:"text-center",children:Object(d.jsx)("h2",{children:"You have no subscriptions"})})})})})),fe=function(){return Object(d.jsx)("div",{className:"text-center mt-5",children:Object(d.jsx)("h1",{children:"Page Not Found"})})};var xe=function(){return Object(d.jsx)(b,{reducer:A,initialState:q,children:Object(d.jsx)(i.a,{children:Object(d.jsxs)(c.a.Fragment,{children:[Object(d.jsx)(H,{}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(o.b,{path:"/register",component:J}),Object(d.jsx)(o.b,{path:"/login",component:z}),Object(d.jsx)(o.b,{exact:!0,path:"/",component:oe}),Object(d.jsx)(o.b,{path:"/post/:id",component:de}),Object(d.jsx)(o.b,{path:"/user/:id",component:he}),Object(d.jsx)(o.d,{children:Object(d.jsx)(Y,{path:"/feed",component:Oe})}),Object(d.jsx)(o.b,{path:"/404",component:fe})]}),Object(d.jsx)(M,{})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(d.jsx)(xe,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},94:function(e,t,a){}},[[225,1,2]]]);
//# sourceMappingURL=main.845190f7.chunk.js.map